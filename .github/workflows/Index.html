<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MPL League</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg:#0b1020; --card:#121833; --accent:#00ffd5; --text:#ffffff; --muted:#9aa4ff;
    }
    *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
    body{margin:0;background:var(--bg);color:var(--text)}
    header{padding:20px;text-align:center;background:linear-gradient(135deg,#1a1f4a,#0b1020)}
    header h1{margin:0;color:var(--accent);letter-spacing:2px}
    nav{display:flex;gap:10px;justify-content:center;margin-top:10px;flex-wrap:wrap}
    nav button{background:var(--card);border:1px solid var(--accent);color:var(--text);padding:8px 14px;border-radius:8px;cursor:pointer}
    nav button.active{background:var(--accent);color:#000}
    main{padding:20px;max-width:1200px;margin:auto}
    .card{background:var(--card);border-radius:16px;padding:16px;margin-bottom:16px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
    .match{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:10px}
    .team{text-align:center}
    .vs{text-align:center;color:var(--accent);font-weight:bold}
    .score{font-size:22px;color:var(--accent)}
    .meta{font-size:13px;color:var(--muted)}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border-bottom:1px solid #2a3160;padding:6px;text-align:left;font-size:14px}
    th{color:var(--accent)}
    footer{text-align:center;padding:20px;color:var(--muted)}

    /* Admin */
    .admin-only{display:none}
    .admin input,.admin textarea,.admin select{width:100%;padding:8px;margin:4px 0;border-radius:6px;border:none}
    .admin button{margin-top:6px}
  </style>
</head>
<body>
<header>
  <h1>MPL LEAGUE</h1>
  <div class="meta">Official Match & Score Updates</div>
  <nav id="yearNav"></nav>
</header>

<main>
  <div id="home"></div>

  <!-- Admin Panel -->
  <div id="adminPanel" class="card admin admin-only">
    <h2>Admin Panel</h2>
    <input type="password" id="adminPass" placeholder="Enter Admin Password" />
    <button onclick="loginAdmin()">Login</button>

    <div id="adminControls" style="display:none">
      <h3>Add / Update Match</h3>
      <select id="yearSelect"></select>
      <input id="matchId" placeholder="Match ID (unique)" />
      <input id="teamA" placeholder="Team A" />
      <input id="teamB" placeholder="Team B" />
      <input id="dateTime" placeholder="Date & Time" />
      <input id="scoreA" placeholder="Team A Score (eg 145/6)" />
      <input id="scoreB" placeholder="Team B Score" />
      <textarea id="playersA" placeholder="Team A Players (comma separated)"></textarea>
      <textarea id="playersB" placeholder="Team B Players"></textarea>
      <textarea id="bowling" placeholder="Bowling Data (Player - overs - runs - wickets)"></textarea>
      <button onclick="saveMatch()">Save Match</button>
      <p class="meta">⚠ After updating, click Export JSON and commit it to GitHub to keep data permanent.</p>
      <button onclick="exportJSON()">Export JSON</button>
    </div>
  </div>
</main>

<footer>© MPL League</footer>

<script>
/* ================= CONFIG ================= */
const ADMIN_PASSWORD = "@mpl_abhi_ihba_2006_09_20_3107//pp2211";

/* ================= DATA ================= */
let data = JSON.parse(localStorage.getItem('mplData')) || {
  2026:{matches:[]}
};

/* ================= INIT ================= */
const yearNav = document.getElementById('yearNav');
const home = document.getElementById('home');
const yearSelect = document.getElementById('yearSelect');

function init(){
  renderYears();
  const firstYear = Object.keys(data)[0];
  showYear(firstYear);
  setupAdmin();
}

function renderYears(){
  yearNav.innerHTML = '';
  yearSelect.innerHTML = '';
  Object.keys(data).forEach(y=>{
    const b = document.createElement('button');
    b.textContent = y;
    b.onclick = ()=>showYear(y);
    yearNav.appendChild(b);

    const o = document.createElement('option');
    o.value = y; o.textContent = y;
    yearSelect.appendChild(o);
  });
}

function showYear(year){
  home.innerHTML = '';
  (data[year]?.matches || []).forEach(m=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML = `
      <div class="match">
        <div class="team"><h3>${m.teamA}</h3><div class="score">${m.scoreA}</div></div>
        <div class="vs">VS</div>
        <div class="team"><h3>${m.teamB}</h3><div class="score">${m.scoreB}</div></div>
      </div>
      <div class="meta">${m.dateTime}</div>
      <h4>Players</h4>
      <p><b>${m.teamA}:</b> ${m.playersA.join(', ')}</p>
      <p><b>${m.teamB}:</b> ${m.playersB.join(', ')}</p>
      <h4>Bowling</h4>
      <pre>${m.bowling}</pre>
    `;
    home.appendChild(card);
  });
}

/* ================= ADMIN ================= */
function setupAdmin(){
  if(location.pathname.includes('admin')){
    document.getElementById('adminPanel').classList.remove('admin-only');
  }
}

function loginAdmin(){
  const pass = document.getElementById('adminPass').value;
  if(pass === ADMIN_PASSWORD){
    document.getElementById('adminControls').style.display='block';
  } else alert('Wrong password');
}

function saveMatch(){
  const y = yearSelect.value;
  if(!data[y]) data[y]={matches:[]};

  const match = {
    id: matchId.value,
    teamA: teamA.value,
    teamB: teamB.value,
    dateTime: dateTime.value,
    scoreA: scoreA.value,
    scoreB: scoreB.value,
    playersA: playersA.value.split(',').map(s=>s.trim()),
    playersB: playersB.value.split(',').map(s=>s.trim()),
    bowling: bowling.value
  };

  const idx = data[y].matches.findIndex(m=>m.id===match.id);
  if(idx>-1) data[y].matches[idx]=match;
  else data[y].matches.push(match);

  localStorage.setItem('mplData', JSON.stringify(data));
  renderYears(); showYear(y);
  alert('Saved locally');
}

function exportJSON(){
  const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'mpl-data.json';
  a.click();
}

init();
</script>
</body>
  </html>

